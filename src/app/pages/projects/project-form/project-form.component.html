<header class="page-header">
    <h1 class="page-title">{{ isEditMode() ? 'Edit Project' : 'New Project' }}</h1>
</header>

<div class="glass-card form-container">
    <form [formGroup]="projectForm" (ngSubmit)="onSubmit()">

        <!-- Name -->
        <div class="form-group">
            <label class="form-label">Project Name</label>
            <input type="text" formControlName="name" class="form-input" placeholder="e.g., Portfolio Website">
        </div>

        <!-- Subtitle -->
        <div class="form-group">
            <label class="form-label">Subtitle</label>
            <input type="text" formControlName="subtitle" class="form-input"
                placeholder="e.g. A full-stack solution for online retail">
        </div>

        <!-- Description -->
        <div class="form-group">
            <label class="form-label">Description</label>
            <textarea formControlName="description" class="form-input" rows="4"
                placeholder="Project details..."></textarea>
        </div>

        <!-- Links -->
        <div class="grid-2">
            <div class="form-group">
                <label class="form-label">Repository URL</label>
                <input type="url" formControlName="repository" class="form-input" placeholder="https://github.com/...">
            </div>

            <div class="form-group">
                <label class="form-label">Deploy URL</label>
                <input type="url" formControlName="deploy" class="form-input" placeholder="https://...">
            </div>
        </div>

        <!-- Stack -->
        <div class="form-group">
            <label class="form-label">Tech Stack (Comma separated)</label>
            <input type="text" [formControl]="stackInput" (blur)="updateStack()" class="form-input"
                placeholder="React, Node.js, TypeScript">
            <div class="tech-tags">
                @for (tech of projectForm.get('stack')?.value; track tech) {
                <span class="badge">{{ tech }}</span>
                }
            </div>
        </div>

        <!-- Image Upload -->
        <div class="form-group">
            <label class="form-label">Project Image</label>
            <input type="file" (change)="onFileSelected($event)" class="form-input" accept="image/*">
            <p class="hint" *ngIf="isEditMode()">Leave empty to keep current image</p>
        </div>

        <div class="form-actions">
            <a routerLink="/dashboard/projects" class="btn btn-secondary">Cancel</a>
            <button type="submit" class="btn btn-primary" [disabled]="isLoading()">
                {{ isLoading() ? 'Saving...' : 'Save Project' }}
            </button>
        </div>
    </form>
</div>